# カウンター・カウンター タスク管理表

**最終更新**: 2026-01-06 (セッション8)

---

## 📊 全体進捗: 98%

| フェーズ | 進捗 | 状態 |
|---------|------|------|
| Phase 1: 環境構築 | 100% | ✅ |
| Phase 2: コア機能 | 100% | ✅ |
| Phase 3: GUI | 100% | ✅ |
| Phase 4: アニメ | 10% | 🔄 |
| Phase 5: 配布 | 0% | ⏳ |

---

## ✅ セッション8完了項目

### ホットキー設定UI刷新【60分】
- [x] コンボボックス方式に変更
- [x] キー入力待機方式の削除
- [x] 最大3セット対応
- [x] 増加・減少それぞれ独立設定
- [x] ホットキー競合チェック実装
- [x] 既存設定の読み込み対応

### ウィンドウ動作改善【20分】
- [x] バツボタン動作の分岐実装
- [x] サーバー停止中: アプリ終了
- [x] サーバー起動中: タスクトレイに格納
- [x] ウィンドウサイズ可変対応

### 要求仕様書更新【10分】
- [x] ホットキー設定方式の変更を反映
- [x] ウィンドウ終了動作の仕様追加
- [x] ウィンドウサイズ可変の追記

---

## 🔴 次の実装タスク

### 優先度: 最高
1. **サーバー起動時のホットキー再登録**【15分】
   - [ ] MainWindow.StartServer()の修正
   - [ ] 既存ホットキーの完全クリア
   - [ ] 設定からホットキーを再登録
   - [ ] 複数セット対応の確認

### 優先度: 中
2. **アニメーション実装**【60分】
   - [ ] スライドイン演出
   - [ ] パーティクル演出
   - [ ] ON/OFF切替機能

3. **その他**【各30分】
   - [ ] アイコン作成
   - [ ] カウンター並び替え

---

## Phase 1: 環境構築【100%】✅

- [x] Visual Studio 2022
- [x] .NET 8 SDK
- [x] NuGet: WebSocketSharp
- [x] フォルダ構造作成
- [x] UIフォルダ整理

---

## Phase 2: コア機能【100%】✅

- [x] CounterManager（複数対応）
- [x] HotkeyManager（動的登録）
- [x] ConfigManager
- [x] WebServer（手動起動）
- [x] WebSocketServer
- [x] ApiHandler
- [x] TrayIcon（トグル対応）

---

## Phase 3: GUI【100%】✅

- [x] MainWindow（モダンデザイン）
- [x] CounterManagementView
- [x] ServerSettingsView（トグルボタン）
- [x] ConnectionInfoView
- [x] CounterEditDialog（拡張版）
  - [x] カラーピッカー
  - [x] ホットキー設定（コンボボックス方式）
  - [x] 複数セット対応（最大3セット）
- [x] CounterCard（コンポーネント化）
- [x] 自動保存機能
- [x] ウィンドウサイズ可変
- [x] ウィンドウ終了動作（サーバー状態で分岐）

---

## Phase 4: Web UI【100%】✅

- [x] obs.html（複数カウンター対応）
- [x] obs.css（フラッシュアニメ）
- [x] obs.js（WebSocket接続）
- [x] 不要ファイル削除完了

---

## Phase 5: アニメーション【10%】🔄

- [ ] スライドイン演出
- [ ] パーティクル演出
- [x] フラッシュエフェクト（基本）

---

## Phase 6: 配布【0%】⏳

- [ ] アイコン作成
- [ ] 単一EXE化
- [ ] 動作テスト

---

## 🐛 既知の問題

### 優先度: 高
- ⚠️ サーバー再起動時のホットキー再登録が不安定な可能性
- ⚠️ アイコンが仮

### 優先度: 中
- ⚠️ アニメーション未実装
- ⚠️ 並び替え機能なし

### 解決済み
- ✅ 名前空間衝突
- ✅ UIフォルダ整理
- ✅ トグルボタン実装
- ✅ 起動時非表示
- ✅ CounterEditDialog拡張
- ✅ 自動保存機能
- ✅ ホットキー設定（コンボボックス方式）
- ✅ 複数セット対応
- ✅ ウィンドウ終了動作
- ✅ ウィンドウサイズ可変

---

## 📅 マイルストーン

| 項目 | 状態 |
|------|------|
| プロトタイプ | ✅ |
| 複数カウンター | ✅ |
| モダンUI | ✅ |
| トグルボタン | ✅ |
| コンポーネント化 | ✅ |
| CounterEditDialog拡張 | ✅ |
| 自動保存 | ✅ |
| ホットキー複数セット | ✅ |
| ウィンドウ動作改善 | ✅ |
| ホットキー再登録修正 | ⏳ 次回 |
| アニメーション | ⏳ 未定 |
| 初回リリース | ⏳ 未定 |

---

## 📝 セッション履歴

### セッション8 (2026-01-06)
- ✅ ホットキー設定UI刷新（コンボボックス方式）
- ✅ 複数セット対応（最大3セット）
- ✅ ウィンドウ終了動作の改善
- ✅ ウィンドウサイズ可変対応
- ✅ 要求仕様書更新

### セッション7 (2026-01-06)
- ✅ CounterEditDialog拡張完了
  - ColorDialog統合
  - ホットキー設定機能（旧方式）
- ✅ CounterManagementView自動保存実装
- ✅ MainWindow更新

### セッション6 (2026-01-06)
- ✅ TrayIconトグル化
- ✅ App.xaml.cs修正（起動時非表示）
- ✅ CounterCardコンポーネント化
- ✅ ServerSettingsViewトグルボタン化
- ✅ 不要ファイル削除

### セッション1-5
- ✅ プロジェクト基盤構築
- ✅ コア機能実装
- ✅ 基本GUI実装

---

**次回セッション**: サーバー起動時のホットキー再登録修正から開始

**推定残り時間**: 1.5-2時間（アニメーション含む）